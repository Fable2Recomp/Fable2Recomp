# Fable2 - ReXGlue Codegen Configuration
# Generated by: rexglue init

# Required settings
project_name = "Fable2"
file_path = "assets/default.xex"
out_directory_path = "generated"

# Patch file paths (not yet implemented)
# patch_file_path = "assets/patch.xexp"
# patched_file_path = "assets/patched.xex"

# --- Code Generation Options ---

# Skip link register saves/restores (use for leaf functions)
# skip_lr = false

# Treat CTR as a local variable instead of global state
# ctr_as_local = false

# Treat XER as a local variable instead of global state
# xer_as_local = false

# Treat reserved registers as local variables
# reserved_as_local = false

# Skip MSR instructions
# skip_msr = false

# Treat CR registers as local variables
# cr_as_local = false

# Treat non-argument registers (r11-r12) as local variables
# non_argument_as_local = false

# Treat non-volatile registers (r14-r31) as local variables
# non_volatile_as_local = false

# Generate exception handler stubs
# generate_exception_handlers = true

# --- Analysis Tuning ---

[analysis]
# Maximum bytes to extend a jump target search
# max_jump_extension = 65536

# Minimum consecutive null bytes to mark as data region
# data_region_threshold = 16

# Threshold for "large function" warnings (bytes)
# large_function_threshold = 1048576

# Additional exception handler function addresses (auto-detected for __C_specific_handler)
# exception_handler_funcs = [0x82000000]

# --- Special Addresses ---

setjmp_address = 0x83006C90
longjmp_address = 0x825E22F0

# --- Manual Overrides ---

[functions]
# Define function boundaries, sizes, or custom names
# 0x82000000 = { name = "MyFunction" }
# 0x82000100 = { size = 64 }
# 0x82000200 = { end = 0x82000280 }
# 0x82000300 = { parent = 0x82000000, size = 32 }  # chunk of MyFunction

# =========================================================
# TU1
# =========================================================

# sub_82C061F0 - small forwarder (lwz/b) -TU1
0x82C061F0 = { size = 8 }

# sub_82C06200 - forwarder with chunk (lwz/b, chunk at 82C06200) -TU1
0x82C06200 = { size = 8 }

# sub_82C06208 - small forwarder (lwz/b) -TU1
0x82C06208 = { size = 8 }

# sub_82C06210 - forwarder to sub_82C0B678 (lwz/b) -TU1
0x82C06210 = { size = 8 }

# sub_82C06218 - small forwarder (lwz/b) -TU1
0x82C06218 = { size = 8 }

# sub_82C06220 - small forwarder (lwz/b) -TU1
0x82C06220 = { size = 8 }

# sub_82C11BE0 - forwarder to sub_82C4FC38 (addi/b) -TU1
0x82C11BE0 = { size = 8 }

# sub_82C11BE8 - forwarder to sub_82C51EC0 (addi/b) -TU1
0x82C11BE8 = { size = 8 }

# sub_82C1B2A0 - tail caller (lwz/cmplwi/beqlr/lwz/b) -TU1
0x82C1B2A0 = { size = 20 }

# sub_82CDF778 - forwarder to sub_82C51EC0 (addi/b) -TU1
0x82CDF778 = { size = 44 }

# sub_82CE9BD0 - forwarder to sub_82C49670 (addi/b) -TU1
0x82CE9BD0 = { size = 8 }

# sub_82E84C68 - vtable initializer (lis/addi/stw/b) -TU1
0x82E84C68 = { size = 16 }

# sub_830061D8 - utility function -TU1
0x830061D8 = { size = 36 }

# sub_830061FC - utility function -TU1
0x830061FC = { size = 56 }


# =========================================================
# TU0
# =========================================================

# sub_82CD7948 - small utility function (lwz/li/stw/blr)
#0x82CD7948 = { size = 16 }

# Fable2_xfr_00a8 - simple return 1 function (li/blr)
#0x82F279D8 = { size = 8 }


# =========================================================
# Function chunks / misc
# =========================================================

# Function chunk of sub_82BFDA50
#0x82C00108 = { parent = 0x82BFDA50, size = 8 }

# Function chunk of sub_82C00120
#0x82C0B688 = { parent = 0x82C00120, size = 8 }

# Function chunk of sub_82C0B5F8 (also referenced by sub_82C0B5C0)
#0x82C14D58 = { parent = 0x82C0B5F8, size = 20 }

# Fiber/coroutine continuation functions (vtable-discovered, need explicit size)
#0x82FFD298 = { size = 0x90 }
#0x82FFF71C = { size = 0x90 }


# [[switch_tables]]
# address = 0x82000000
# register = 11
# labels = [0x82000100, 0x82000200, 0x82000300]

# [[midasm_hook]]
# address = 0x82000000
# name = "MyHook"
# registers = ["r3", "r4"]

# [[invalid_instructions]]
# data = 0x82000000
# size = 8

# Known indirect calls (vtable dispatch, function pointers)
# indirect_calls = [0x82000000]
